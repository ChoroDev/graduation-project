{% extends "base.html" %}
{% load googlecharts %}

{% block title %}Аналитика{% endblock title %}

{% block content %}
  {% if user.is_authenticated %}
    <div id="firstGraph"></div>
    <div id="secondGraph"></div>

    {# Google Charts script is below. Reason: to have clean UI code above #}

    {% googlecharts %}
      {% data values "count" %}
        {% col "string" "Date" %}"{{ val }}"{% endcol %}
        {% col "number" "# of payments" %}{{ val }}{% endcol %}
      {% enddata %}
      {% data summary "sum" %}
        {% col "string" "Date" %}"{{ val|date:"M j" }}"{% endcol %}
        {% col "number" "Paid amount, USD" %}{{ val|floatformat:2 }}{% endcol %}
      {% enddata %}

      basicOptions = {
        backgroundColor: "#fff",
        colors: ["#09f"],
        gridlineColor: "#ddd",
        legend: "none",
        vAxis: {minValue: 0},
        chartArea: {left: 40, top: 20, width: 240, height: 180},
        width: 300,
        height: 250
      };
      {% options "firstOptions" %}
        kind: "LineChart",
        options: basicOptions
      {% endoptions %}
      {% graph "firstGraph" "count" "firstOptions" %}

      {% options "secondOptions" %}
        kind: "LineChart",
        options: basicOptions
      {% endoptions %}
      {% graph "secondGraph" "sum" "secondOptions" %}
    {% endgooglecharts %}
  {% endif %}
{% endblock content %}
